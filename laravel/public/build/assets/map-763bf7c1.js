var a=JSON.parse($("#map").attr("data-seo-map")),o=JSON.parse($("#map").attr("data-seo-links"));console.log(a);var e={nodes:a,links:o},r=d3.select("svg"),s=+r.attr("width"),d=+r.attr("height");d3.select("div#chartId").append("div").classed("svg-container",!0).append("svg").attr("preserveAspectRatio","xMinYMin meet").attr("viewBox","0 0 600 400").classed("svg-content-responsive",!0);var c=d3.scaleOrdinal(d3.schemeCategory20),l=50,n=d3.forceSimulation().force("link",d3.forceLink().id(function(t){return t.id}).distance(80)).force("charge",d3.forceManyBody().strength(-100)).force("center",d3.forceCenter(s/2,d/2)).force("collide",d3.forceCollide().radius(function(t){return l+.5}).iterations(4));n.nodes(e.nodes);n.force("link").links(e.links);var u=r.append("g").attr("class","link").selectAll("line").data(e.links).enter().append("line"),i=r.append("g").attr("class","nodes").selectAll("circle").data(e.nodes).enter().append("circle").attr("r",function(t){return t.hasOwnProperty("group")?t.size*2:9}).style("fill",function(t){return c(t.group)}).call(d3.drag().on("start",g).on("drag",v).on("end",x));i.append("svg:title").attr("dx",-80).attr("dy",".5em").text(function(t){return t.name});var f=r.append("g").attr("class","label").selectAll("text").data(e.nodes).enter().append("text").attr("dx",12).attr("dy",".5em").style("font-size",13).text(function(t){return t.name});n.nodes(e.nodes).on("tick",p);n.force("link").links(e.links);function p(){u.attr("x1",function(t){return t.source.x}).attr("y1",function(t){return t.source.y}).attr("x2",function(t){return t.target.x}).attr("y2",function(t){return t.target.y}),i.attr("cx",function(t){return t.x}).attr("cy",function(t){return t.y}),f.attr("x",function(t){return t.x}).attr("y",function(t){return t.y})}function g(t){d3.event.active||n.alphaTarget(.3).restart(),t.fx=t.x,t.fy=t.y}function v(t){t.fx=d3.event.x,t.fy=d3.event.y}function x(t){d3.event.active||n.alphaTarget(0),t.fx=null,t.fy=null}
