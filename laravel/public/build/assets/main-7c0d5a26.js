$(document).ready(function(){$(".btn-add-product").click(function(a){a.preventDefault();let t=$(this).attr("data-url"),r=$(this).closest(".card").attr("id"),s=$(this).closest(".btn-block").find(".product-price").attr("data-count");r=r.substr(2),$.ajax({type:"POST",url:t,data:{_token:$('meta[name="csrf-token"]').attr("content"),id_product:r,count_value:s},success:function(e){$("#productCounter").css("display","inline-block"),$("#productCounter").text(e)}})}),$(".count-value").click(function(a){a.preventDefault();let t=$(this).attr("data-price"),r=$(this).parent().find(".btn-warning");r.removeClass("btn-warning"),r.addClass("btn-outline-warning"),$(this).removeClass("btn-outline-warning"),$(this).addClass("btn-warning"),$(this).parent().parent().find(".product-price").text(t),$(this).parent().parent().find(".product-price").attr("data-count",$(this).attr("data-count"));let s=$(this).closest(".product").attr("href"),e=s.lastIndexOf("/");s=s.substring(0,e)+"/"+$(this).attr("data-count"),$(this).closest(".product").attr("href",s)}),$(".btn-delete").click(function(a){let t=$(this),r=$(this).attr("id"),s=$(t).attr("data-url"),e=$(this).attr("data-size");r=r.substr(8),$.ajax({type:"POST",url:s,data:{_token:$('meta[name="csrf-token"]').attr("content"),id_product:r,count_value:e},success:function(i){let o=jQuery.parseJSON(i);$("#productCounter").text(o.count),$(t).closest("tr").remove(),$("#totalPrice").text(o.totalPrice+" грн")}})}),$("#btn-promocode").click(function(a){let t=$("#promocodeInput").val(),r=$(this).attr("data-url");t.length&&$.ajax({type:"POST",url:r,data:{_token:$('meta[name="csrf-token"]').attr("content"),promocode:t},success:function(s){typeof s.error<"u"?($(".error").text(s.error),$("#promocodeInput").css("border-color","red")):($("#totalPrice").text(s+" грн"),$("#promocodeInput").attr("disabled","disabled"),$("#promocodeInput").css("border-color","lightgrey"),$("#btn-promocode").attr("onclick",""),$(".error").text(""))}})}),$(".poshta-block .btn").click(function(a){$(this).attr("id")=="ukrPoshtaLabel"?($(".nova-poshta-block").css("display","none"),$(".ukr-poshta-block").css("display","block"),$(this).attr("checked","checked"),$("#novaPoshta").removeAttr("checked"),clearPoshtaBlock()):($(".ukr-poshta-block").css("display","none"),$(".nova-poshta-block").css("display","block"),$(this).attr("checked","checked"),$("#ukrPoshta").removeAttr("checked"))}),$("#searchCities").keyup(function(a){a.preventDefault();let t=$("#searchCities").val(),r=$("#searchCities").attr("data-url"),s=new bootstrap.Dropdown(document.getElementById("cityDrop"));t.length>2?$.ajax({type:"POST",url:r,data:{_token:$('meta[name="csrf-token"]').attr("content"),city:t},success:function(e){let i=e.data[0].Addresses,o="";for(let l=0;l<i.length;l++)o+="<li><a onclick='let search = document.getElementById(`searchCities`); search.setAttribute(`disabled`, ``);search.value = this.textContent; search.setAttribute(`data-cityref`, this.id); search.setAttribute(`data-city`, this.getAttribute(`data-city`)); document.querySelector(`.cities-select`).style.display = `none`; document.getElementById(`warehouses`).style.display = `flex`; 'id='"+i[l].DeliveryCity+`' class="dropdown-item city-li" data-city="`+i[l].MainDescription+'" href="#">'+i[l].Present+"</a></li>";$(".cities-select").html(o.length?o:'<li ><a class="dropdown-item disabled" href="#">Невірний населений пункт!</a></li>'),$(".cities-select").css("display","block"),s.show(),$("#searchCities").focus()}}):(s.hide(),$("#searchCities").focus(),$(".cities-select").html('<li ><a class="dropdown-item disabled" href="#">Введіть населений пункт!</a></li>'))}),$("#searchCourierCities").keyup(function(a){a.preventDefault();let t=$("#searchCourierCities").val(),r=$("#searchCourierCities").attr("data-url"),s=new bootstrap.Dropdown(document.getElementById("cityCourierDrop"));t.length>2?$.ajax({type:"POST",url:r,data:{_token:$('meta[name="csrf-token"]').attr("content"),city:t},success:function(e){let i=e.data[0].Addresses,o="";for(let l=0;l<i.length;l++)o+='<li><a onclick=\'let search = document.getElementById(`searchCourierCities`); search.setAttribute(`disabled`, ``);search.value = this.textContent;document.querySelector(`.cities-courier-select`).style.display = `none`; \'class="dropdown-item city-li" href="#">'+i[l].Present+"</a></li>";$(".cities-courier-select").html(o.length?o:'<li ><a class="dropdown-item disabled" href="#">Невірний населений пункт!</a></li>'),$(".cities-courier-select").css("display","block"),s.show(),$("#searchCourierCities").focus()}}):(s.hide(),$("#searchCourierCities").focus(),$(".cities-courier-select").html('<li ><a class="dropdown-item disabled" href="#">Введіть населений пункт!</a></li>'))}),$("#searchWarehouses").keyup(function(a){a.preventDefault();let t=$("#searchWarehouses").val(),r=$("#searchWarehouses").attr("data-url"),s=new bootstrap.Dropdown(document.getElementById("warehousesDrop")),e=$("#searchCities").attr("data-city"),i=$("#searchCities").attr("data-cityref");t.length?$.ajax({type:"POST",url:r,data:{_token:$('meta[name="csrf-token"]').attr("content"),city:e,cityRef:i,warehouse:t},success:function(o){let l=o.data,n="";for(let c=0;c<l.length;c++)n+='<li><a onclick=\'let search = document.getElementById(`searchWarehouses`); search.setAttribute(`disabled`, ``);search.value = this.textContent; document.querySelector(`.warehouses-select`).style.display = `none`;\'  class="dropdown-item" href="#">'+l[c].Description+"</a></li>";$(".warehouses-select").html(n.length?n:'<li ><a class="dropdown-item disabled" href="#">Невірні дані!</a></li>'),$(".warehouses-select").css("display","block"),s.show(),$("#searchWarehouses").focus()}}):(s.hide(),$("#searchWarehouses").focus(),$(".warehouses-select").html('<li ><a class="dropdown-item disabled" href="#">Введіть № відділення/поштомату або вулицю!</a></li>'))}),$(".novaRadios").change(function(a){$("#novaCourier").prop("checked")?($("#courier-nova-poshta").css("display","block"),$("#cities").css("display","none"),$("#warehouses").css("display","none")):($("#courier-nova-poshta").css("display","none"),$("#cities").css("display","flex"),$("#cities input").prop("disabled")&&$("#warehouses").css("display","flex"))}),$(".ukrRadios").change(function(a){$("#ukrCourier").prop("checked")?($("#courier-ukr-poshta").css("display","block"),$("#ukrCities").css("display","none"),$("#postOffices").css("display","none")):($("#courier-ukr-poshta").css("display","none"),$("#ukrCities").css("display","flex"),$("#ukrCities input").prop("disabled")&&$("#postOffices").css("display","flex"))}),$("#searchUkrPoshtaCities").keyup(function(a){a.preventDefault();let t=$("#searchUkrPoshtaCities").val(),r=$("#searchUkrPoshtaCities").attr("data-url"),s=new bootstrap.Dropdown(document.getElementById("ukrPoshtaCityDrop"));t.length>2?$.ajax({type:"POST",url:r,data:{_token:$('meta[name="csrf-token"]').attr("content"),city:t},success:function(e){let i="";for(let o=0;o<e.length;o++)i+='<li><a onclick=\'let search = document.getElementById(`searchUkrPoshtaCities`); search.setAttribute(`disabled`, ``);search.value = this.textContent; search.setAttribute(`data-cityId`, this.getAttribute(`data-cityId`)); search.setAttribute(`data-districtId`, this.getAttribute(`data-districtId`)); search.setAttribute(`data-regionId`, this.getAttribute(`data-regionId`));document.querySelector(`.ukr-poshta-cities-select`).style.display = `none`; document.getElementById(`postOffices`).style.display = `flex`; \'class="dropdown-item city-li" data-cityId="'+e[o].CITY_ID+'" data-districtId="'+e[o].DISTRICT_ID+'" data-regionId="'+e[o].REGION_ID+'" href="#">'+e[o].SHORTCITYTYPE_UA+" "+e[o].CITY_UA+" "+e[o].DISTRICT_UA+" р. "+e[o].REGION_UA+" обл.</a></li>";$(".ukr-poshta-cities-select").html(i.length?i:'<li ><a class="dropdown-item disabled" href="#">Невірний населений пункт!</a></li>'),$(".ukr-poshta-cities-select").css("display","block"),s.show(),$("#searchUkrPoshtaCities").focus()}}):(s.hide(),$("#searchUkrPoshtaCities").focus(),$(".ukr-poshta-cities-select").html('<li ><a class="dropdown-item disabled" href="#">Введіть населений пункт!</a></li>'))}),$("#searchUkrPoshtaCourierCities").keyup(function(a){a.preventDefault();let t=$("#searchUkrPoshtaCourierCities").val(),r=$("#searchUkrPoshtaCourierCities").attr("data-url"),s=new bootstrap.Dropdown(document.getElementById("ukrPoshtaCourierCityDrop"));t.length>2?$.ajax({type:"POST",url:r,data:{_token:$('meta[name="csrf-token"]').attr("content"),city:t},success:function(e){let i="";for(let o=0;o<e.length;o++)i+='<li><a onclick=\'let search = document.getElementById(`searchUkrPoshtaCourierCities`); search.setAttribute(`disabled`, ``);search.value = this.textContent;document.querySelector(`.ukr-poshta-courier-cities-select`).style.display = `none`; \'class="dropdown-item city-li" href="#">'+e[o].SHORTCITYTYPE_UA+" "+e[o].CITY_UA+" "+e[o].DISTRICT_UA+" р. "+e[o].REGION_UA+" обл.</a></li>";$(".ukr-poshta-courier-cities-select").html(i.length?i:'<li ><a class="dropdown-item disabled" href="#">Невірний населений пункт!</a></li>'),$(".ukr-poshta-courier-cities-select").css("display","block"),s.show(),$("#searchUkrPoshtaCourierCities").focus()}}):(s.hide(),$("#searchUkrPoshtaCourierCities").focus(),$(".ukr-poshta-courier-cities-select").html('<li ><a class="dropdown-item disabled" href="#">Введіть населений пункт!</a></li>'))}),$("#searchPostOffices").keyup(function(a){a.preventDefault();let t=$("#searchPostOffices").val(),r=$("#searchPostOffices").attr("data-url"),s=new bootstrap.Dropdown(document.getElementById("postOfficesDrop")),e=$("#searchUkrPoshtaCities").attr("data-cityId"),i=$("#searchUkrPoshtaCities").attr("data-districtId"),o=$("#searchUkrPoshtaCities").attr("data-regionId");t.length?$.ajax({type:"POST",url:r,data:{_token:$('meta[name="csrf-token"]').attr("content"),cityId:e,districtId:i,regionId:o,zipCode:t},success:function(l){let n="";for(let c=0;c<l.length;c++)n+='<li><a onclick=\'let search = document.getElementById(`searchPostOffices`); search.setAttribute(`disabled`, ``);search.value = this.textContent; document.querySelector(`.post-offices-select`).style.display = `none`;\'  class="dropdown-item" href="#">'+l[c].POSTCODE+", "+l[c].CITY_UA+(l[c].STREET_UA_VPZ!==null?", "+l[c].STREET_UA_VPZ:"")+"</a></li>";$(".post-offices-select").html(n.length?n:'<li ><a class="dropdown-item disabled" href="#">Невірні дані!</a></li>'),$(".post-offices-select").css("display","block"),s.show(),$("#searchPostOffices").focus()}}):(s.hide(),$("#searchPostOffices").focus(),$(".post-offices-select").html('<li ><a class="dropdown-item disabled" href="#">Введіть індекс відділення!</a></li>'))}),$("#btn-order").click(function(){let a=$("#btn-order").attr("data-url"),t=[],r=$("[name='pip']").val()?$("[name='pip']").val():t.push("*Заповніть поле Повного імені!"),s=$("[name='phone']").val()?$("[name='phone']").val():t.push("*Заповніть поле Номер телефону!"),e={};if($("#novaPoshta").prop("checked")?(e.type_poshta=$("#novaPoshta").val(),$("#novaCourier").prop("checked")?(e.type_delivery=$("#novaCourier").val(),$("#searchCourierCities").val()&&$("#searchCourierCities").attr("disabled")!==void 0?e.nova_city=$("#searchCourierCities").val():t.push("*Виберіть населений пункт!"),$("[name='nova_street']").val()?e.street=$("[name='nova_street']").val():t.push("*Заповніть поле Вулиця!"),$("[name='nova_house']").val()?e.house=$("[name='nova_house']").val():t.push("*Заповніть поле Будинок!"),e.room=$("[name='nova_room']").val()):(e.type_delivery=$("#novaWarehouse").val(),$("#searchCities").val()&&$("#searchCities").attr("disabled")!==void 0?e.nova_city=$("#searchCities").val():t.push("*Виберіть населений пункт!"),$("#searchWarehouses").val()&&$("#searchWarehouses").attr("disabled")?e.nova_warehouse=$("#searchWarehouses").val():t.push("*Виберіть відділення!"))):(e.type_poshta=$("#ukrPoshta").val(),$("#ukrCourier").prop("checked")?(e.type_delivery=$("#ukrCourier").val(),$("#searchUkrPoshtaCourierCities").val()&&$("#searchUkrPoshtaCourierCities").attr("disabled")!==void 0?e.ukr_city=$("#searchUkrPoshtaCourierCities").val():t.push("*Виберіть населений пункт!"),$("[name='ukr_street']").val()?e.street=$("[name='ukr_street']").val():t.push("*Заповніть поле Вулиця!"),$("[name='ukr_house']").val()?e.house=$("[name='ukr_house']").val():t.push("*Заповніть поле Будинок!"),e.room=$("[name='ukr_room']").val()):(e.type_delivery=$("#ukrPostOfiice").val(),$("#searchUkrPoshtaCities").val()&&$("#searchUkrPoshtaCities").attr("disabled")!==void 0?e.ukr_city=$("#searchUkrPoshtaCities").val():t.push("*Виберіть населений пункт!"),$("#searchPostOffices").val()&&$("#searchPostOffices").attr("disabled")!==void 0?e.ukr_post_office=$("#searchPostOffices").val():t.push("*Виберіть відділення!"))),!t.length)$(".btn-order").html('<div class="spinner-border" role="status"> <span class="visually-hidden">Loading...</span></div>'),$.ajax({type:"POST",url:a,async:!1,data:{_token:$('meta[name="csrf-token"]').attr("content"),pip:r,phone:s,poshta:e},success:function(i){$("#error-block").addClass("d-none"),location.href=i}});else{$(".btn-order").html('<i class="fas fa-shipping-fast"></i> Оформити');let i=t.join("<br>");$("#error-block").html("<span style='font-weight: bold;'>Ви не заповнили всі дані:</span> <br>"+i),$("#error-block").addClass("alert alert-danger")}}),$(".product-row").children(".product-grid"),$(".fa-sort-alpha-down, .fa-sort-alpha-up, .fa-sort-numeric-down, .fa-sort-numeric-up").click(function(){let a=$(".product-row"),t=a.children(".product-grid");$(this).hasClass("fa-sort-alpha-down")?($(this).removeClass("fa-sort-alpha-down"),$(this).addClass("fa-sort-alpha-up"),$(".sort").attr("data-sort","alpha-up"),t.sort(function(r,s){let e=r.querySelector(".product-name").textContent,i=s.querySelector(".product-name").textContent;return i<e?-1:i>e?1:0}),$(a).append(t)):$(this).hasClass("fa-sort-alpha-up")?($(this).removeClass("fa-sort-alpha-up"),$(this).addClass("fa-sort-alpha-down"),$(".sort").attr("data-sort","alpha-down"),t.sort(function(r,s){let e=r.querySelector(".product-name").textContent,i=s.querySelector(".product-name").textContent;return e<i?-1:e>i?1:0}),$(a).append(t)):$(this).hasClass("fa-sort-numeric-down")?($(this).removeClass("fa-sort-numeric-down"),$(this).addClass("fa-sort-numeric-up"),$(".sort").attr("data-sort","price-up"),t.sort(function(r,s){let e=r.querySelector(".product-price").textContent,i=s.querySelector(".product-price").textContent;return i<e?-1:i>e?1:0}),$(a).append(t)):$(this).hasClass("fa-sort-numeric-up")&&($(this).removeClass("fa-sort-numeric-up"),$(this).addClass("fa-sort-numeric-down"),$(".sort").attr("data-sort","price-down"),t.sort(function(r,s){let e=r.querySelector(".product-price").textContent,i=s.querySelector(".product-price").textContent;return e<i?-1:e>i?1:0}),$(a).append(t)),$(".sort-active").removeClass("sort-active"),$(this).addClass("sort-active")}),$(".search-btn").click(function(){let a=$(".filter-url").attr("data-url");m(a,p(),h(),f(),!1)}),$(".rangeHandle").mouseup(function(){if(h()!==""){let a=$(".filter-url").attr("data-url");m(a,p(),h(),f(),!1)}else{let a=$(".filter-url").attr("data-url"),t=$(".category").attr("data-category");m(a,p(),h(),f(),t)}});function p(){return $(".sort").attr("data-sort")}function h(){return $(".search-field").val()}function f(){let a=$('[data-handle="0"]').attr("aria-valuenow"),t=$('[data-handle="1"]').attr("aria-valuenow");return[a,t]}function m(a,t,r,s,e){$.ajax({type:"POST",url:a,data:{_token:$('meta[name="csrf-token"]').attr("content"),sort:t,search:r,price:s,category_id:e},success:function(i){r!=""?$(".h-value").text("Результати пошуку"):$(".h-value").text($(".category").attr("data-category-name")),i.length?($(".product-row").html(i),$(".product-row").children(".product-grid"),$(".container-empty").css("display","none")):($(".container-empty").css("display","block"),$(".product-row").html(i))}})}$("#clearSearchCities").click(function(){$("#searchCities").prop("disabled",!1),$("#searchCities").val("")}),$("#clearSearchWarehouses").click(function(){$("#searchWarehouses").prop("disabled",!1),$("#searchWarehouses").val("")}),$("#clearSearchCourierCities").click(function(){$("#searchCourierCities").prop("disabled",!1),$("#searchCourierCities").val("")}),$("#clearSearchUkrPoshtaCities").click(function(){$("#searchUkrPoshtaCities").prop("disabled",!1),$("#searchUkrPoshtaCities").val("")}),$("#clearSearchPostOffices").click(function(){$("#searchPostOffices").prop("disabled",!1),$("#searchPostOffices").val("")}),$("#clearSearchUkrPoshtaCourierCities").click(function(){$("#searchUkrPoshtaCourierCities").prop("disabled",!1),$("#searchUkrPoshtaCourierCities").val("")}),$(".btn-menu").click(function(){$(".sidebar").css("display")=="none"?($(".sidebar").css("display","block"),$(".btn-menu").html('<i class="fas fa-hand-point-left"></i>&nbsp;MedoBear'),$(".btn-menu").css("width","300px"),$(".product-content").css("display","none"),$("body").css("background","#2d3748")):($(".sidebar").css("display","none"),$(".btn-menu").html('<i class="fas fa-bars"></i>'),$(".btn-menu").css("width","50px"),$(".product-content").css("display","block"),$("body").css("background","white"))}),$(".copy").click(function(){var a=$("<input>");$("body").append(a),a.val($(this).parent().find("span").text()).select(),document.execCommand("copy"),a.remove(),$(this).removeClass("fa-copy"),$(this).addClass("fa-check");var t=this;setTimeout(function(){$(t).removeClass("fa-check"),$(t).addClass("fa-copy")},1500)}),$(".btn-copy, .btn-copy .fa-copy").click(function(){var a=$("<input>");$("body").append(a),a.val($(this).parent().find(".copy-url").val()).select(),document.execCommand("copy"),a.remove(),$(".btn-copy i").removeClass("fa-copy"),$(".btn-copy i").addClass("fa-check"),setTimeout(function(){$(".btn-copy i").removeClass("fa-check"),$(".btn-copy i").addClass("fa-copy")},1500)}),$(".btn-card").click(function(){if($(".btn-card i").hasClass("fa-credit-card")){if($(".card-input").length){let a=$(".card-input").val(),t=$(this).attr("data-url");$.ajax({type:"POST",url:t,data:{_token:$('meta[name="csrf-token"]').attr("content"),card:a},success:function(r){$(".btn-card i").removeClass("fa-credit-card"),$(".btn-card i").addClass("fa-edit"),$(".card-input").prop("disabled",!0)}})}}else $(".btn-card i").removeClass("fa-edit"),$(".btn-card i").addClass("fa-credit-card"),$(".card-input").removeAttr("disabled")}),$(".btn-group").click(function(){if($(".btn-group i").hasClass("fa-telegram")){if($(".group-input").length){let a=$(".group-input").val(),t=$(this).attr("data-url");$.ajax({type:"POST",url:t,data:{_token:$('meta[name="csrf-token"]').attr("content"),group:a},success:function(r){$(".btn-group i").removeClass("fa-telegram"),$(".btn-group i").removeClass("fab"),$(".btn-group i").addClass("fa-edit"),$(".btn-group i").addClass("fas"),$(".group-input").prop("disabled",!0)}})}}else $(".btn-group i").removeClass("fa-edit"),$(".btn-group i").removeClass("fas"),$(".btn-group i").addClass("fa-telegram"),$(".btn-group i").addClass("fab"),$(".group-input").removeAttr("disabled")});var d=0;$(".count-orders").attr("data-count-orders")<$(".count-orders").attr("data-standart-count")&&$("#next").attr("disabled","disabled"),$("#next, #prev").click(function(){let a=$(this).parent().attr("data-url"),t=$(".order-type").attr("data-link"),r=$(".order-type").attr("data-last");this.id=="next"?(d++,$("#prev").prop("disabled",!1)):d>0&&(d--,$("#next").prop("disabled",!1),d==0&&$("#prev").attr("disabled","disabled")),y(a,d,t,r)});var u=0;$(".count-links").attr("data-count-links")<$(".count-links").attr("data-standart-count-links")&&$("#stat-next").attr("disabled","disabled"),$("#stat-next, #stat-prev").click(function(){let a=$(this).parent().attr("data-url");this.id=="stat-next"?(u++,$("#stat-prev").prop("disabled",!1)):u>0&&(u--,$("#stat-next").prop("disabled",!1),u==0&&$("#stat-prev").attr("disabled","disabled")),$.ajax({type:"POST",url:a,async:!1,data:{_token:$('meta[name="csrf-token"]').attr("content"),numberPage:u},success:function(t){t&&($(".stat-link-container").html(t),$(".count-links").attr("data-next-page")||$("#stat-next").attr("disabled","disabled"))}})}),$(".btn-show-all").click(function(){$(this).parent().find(".all-products").hasClass("d-none")?$(this).parent().find(".all-products").removeClass("d-none"):$(this).parent().find(".all-products").addClass("d-none")});function y(a,t,r,s){$.ajax({type:"POST",url:a,async:!1,data:{_token:$('meta[name="csrf-token"]').attr("content"),numberPage:t,link:r,lastOrders:s},success:function(e){e&&($(".orders-container").html(e),$(".count-orders").attr("data-next-page")||$("#next").attr("disabled","disabled"))}})}$(".show-order-icon").click(function(){$(".order-type").attr("data-link",$(this).parent().attr("data-stat-link")),$(".order-type").attr("data-last",!1),$(".order-type").text($(this).parent().attr("data-stat-value"));let a=$(".page-block").attr("data-url");$("#prev").attr("disabled","disabled"),y(a,0,$(".order-type").attr("data-link"),!1)}),$(".show-order-icon-last").click(function(){$(".order-type").attr("data-link",$(this).parent().attr("data-stat-link")),$(".order-type").attr("data-last",!0),$(".order-type").text($(this).parent().attr("data-stat-value"));let a=$(".page-block").attr("data-url");$("#prev").attr("disabled","disabled"),y(a,0,$(".order-type").attr("data-link"),!0)}),$("#partner-link").change(function(){$(".copy-url").val($(this).val())}),$(function(){$(".tooltipOrder").tooltip({placement:"bottom",trigger:"hover"})})});
